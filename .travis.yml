sudo: false
cache:
  directories:
    - .cabal-sandbox
    - dist
    - $HOME/.cabal
language: haskell
addons:
  apt:
    sources:
    - hvr-ghc
    packages:
    - ghc-7.10.1
before_install:
  - export PATH=/opt/ghc/7.10.1/bin:$HOME/.cabal/bin:$PATH
  - if [[ `cabal --numeric-version` != "1.22"* ]]; then cabal install cabal-install; fi
install:
  - cabal sandbox init
  - cabal install --only-dependencies --enable-tests
script:
  - cabal configure --enable-tests
  - cabal build
  - cabal test --show-details=streaming
